package com.capgemini.bowling;

import static org.junit.Assert.*;

import org.junit.Before;
import org.junit.Test;

public class BowlingTest {
	private BowlingGameResultCalculator scoreCalculator;

	@Before
	public void setUp() {
		scoreCalculator = new BowlingGame();
	}

	@Test
	public void canRollAll0() {
		// given
		int numberOfPinsDown = 0;
		// when
		((BowlingGame) scoreCalculator).rollManyTimes(numberOfPinsDown, 20);
		// then
		assertEquals(0, scoreCalculator.score());
	}

	@Test
	public void canRollAll1() {
		// given
		int numberOfPinsDown = 1;
		// when
		((BowlingGame) scoreCalculator).rollManyTimes(numberOfPinsDown, 20);
		// then
		assertEquals(20, scoreCalculator.score());
	}

	@Test(expected = IllegalArgumentException.class)
	public void shouldThrowIllegalArgumentExceptionWhenKnockingNegativeNumberOfPins() {
		// given
		int numberOfPinsDown = -1;
		// when
		scoreCalculator.roll(numberOfPinsDown);
	}

	@Test(expected = IllegalArgumentException.class)
	public void shouldThrowIllegalArgumentExceptionWhenKnockingMoreThan10Pins() {
		// given
		int numberOfPinsDown = 11;
		// when
		scoreCalculator.roll(numberOfPinsDown);
	}

	@Test
	public void canRollSpareFirstThenStandardRolls() {
		// given
		scoreCalculator.roll(2);
		scoreCalculator.roll(8);
		scoreCalculator.roll(5);
		((BowlingGame) scoreCalculator).rollManyTimes(1, 17);
		// when
		int score = scoreCalculator.score();
		// then
		assertEquals(37, score);
	}
	
	@Test
	public void canRollFirstStandardRollsThenASpare() {
		// given
		((BowlingGame) scoreCalculator).rollManyTimes(1, 16);
		scoreCalculator.roll(2);
		scoreCalculator.roll(8);
		scoreCalculator.roll(5);
		scoreCalculator.roll(3);
		
		// when
		int score = scoreCalculator.score();
		// then
		assertEquals(39, score);
	}

}
